generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-1.1.x"]
}

datasource db {
  provider = "sqlite"
  url      = "file:./sqlite.db"
}

model Chat {
  id        Int       @id
  type      String
  title     String?
  username  String?
  firstName String?
  lastName  String?
  messages  Message[]
}

model Message {
  id               Int       @id
  from             User      @relation(fields: [fromId], references: [id])
  fromId           BigInt
  chat             Chat      @relation(fields: [chatId], references: [id])
  chatId           Int
  sentAt           DateTime
  editedAt         DateTime?
  replyToMessage   Message?  @relation("ReplyToMessage", fields: [replyToMessageId], references: [id])
  replyToMessageId Int?
  text             String?
  replies          Message[] @relation("ReplyToMessage")
}

model User {
  id           BigInt       @id
  isBot        Boolean
  firstName    String
  lastName     String?
  username     String?
  languageCode String?
  messages     Message[]
}
